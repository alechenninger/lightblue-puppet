{
    "documentation": [
        "type - REQUIRED - the class implementing MetadataConfiguration interface",
        "hookConfigurationParsers - OPTIONAL - array of classes implementing HookConfigurationParser interface",
        "The remainder of the file is parsed by the implementation class"
    ],
    "type" : "com.redhat.lightblue.mongo.config.MongoMetadataConfiguration",
<% if hook_configuration_parsers != '' && hook_configuration_parsers.kind_of?(Array) -%>
    "hookConfigurationParsers" : [
    <%
      i = hook_configuration_parsers.length
      hook_configuration_parsers.each do |parser|
    -%>
        "<%=parser%>"
    <% if i > 1 then -%>
        ,
    <%
      end 
      i = i - 1
    -%>
    <% end -%>
    ],
<% end -%>
<% if metadata_roles != '' && metadata_roles.kind_of?(Hash) -%>
    "roleMap":{
        "metadata.find.dependencies": ["<%= metadata_roles["metadata.find.dependencies"] %>"],
        "metadata.find.roles": ["<%= metadata_roles["metadata.find.roles"] %>"],
        "metadata.find.entityNames": ["<%= metadata_roles["metadata.find.entityNames"] %>"],
        "metadata.find.entityVersions": ["<%= metadata_roles["metadata.find.entityVersions"] %>"],
        "metadata.find.entityMetadata": ["<%= metadata_roles["metadata.find.entityMetadata"] %>"],
        "metadata.insert": ["<%= metadata_roles["metadata.insert"] %>"],
        "metadata.insert.schema": ["<%= metadata_roles["metadata.insert.schema"] %>"],
        "metadata.update.entityInfo": ["<%= metadata_roles["metadata.update.entityInfo"] %>"],
        "metadata.update.schemaStatus": ["<%= metadata_roles["metadata.update.schemaStatus"] %>"],
        "metadata.update.defaultVersion": ["<%= metadata_roles["metadata.update.defaultVersion"] %>"],
        "metadata.delete.entity": ["<%= metadata_roles["metadata.delete.entity"] %>"]
    },
<% end -%>
<% if backend_parsers != '' && backend_parsers.kind_of?(Array) -%>
    "backend_parsers": [
        <%
        j = backend_parsers.length
        backend_parsers.each do |backend_parser|
        -%>
        {
       "name" : "<%=backend_parser['name']%>",
       "clazz" : "<%=backend_parser['clazz']%>"
        }
        
        <% if j > 1 then -%>
        ,
        <%
          end 
          j = j - 1
        -%>
        <% end -%>
     ],
<% end -%>
<% if property_parsers != '' && property_parsers.kind_of?(Array) -%>
    "property_parsers": [
        <%
        k = property_parsers.length
        property_parsers.each do |property_parser|
        -%>
        {
       "name" : "<%=property_parser['name']%>",
       "clazz" : "<%=property_parser['clazz']%>"
        }
        
        <% if k > 1 then -%>
        ,
        <%
          end 
          i = k - 1
        -%>
        <% end -%>
     ],
<% end -%>    
    "dataSource" : "metadata",
    "collection": "metadata"
}
